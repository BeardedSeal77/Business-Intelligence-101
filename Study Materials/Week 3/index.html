<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Comprehensive Quiz — Data Mining & R (All-in-One)</title>
<style>
  :root{
    --bg:#0c0f14;
    --panel:#121826;
    --ink:#e6e6ea;
    --muted:#aab2c8;
    --accent:#7aa2ff;
    --good:#1fbf75;
    --bad:#ff5d5d;
    --warn:#e3b341;
    --border:#233044;
  }
  html,body{background:var(--bg); color:var(--ink); margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;}
  .wrap{max-width:1100px; margin:40px auto; padding:0 16px 80px;}
  h1{font-size:28px; margin:0 0 6px;}
  .sub{color:var(--muted); margin:0 0 24px;}
  .card{
    background:linear-gradient(180deg, #121826, #0f1522);
    border:1px solid var(--border);
    border-radius:16px;
    padding:18px 20px;
    margin:14px 0;
    box-shadow:0 8px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.02);
  }
  .qhead{display:flex; gap:10px; align-items:baseline; flex-wrap:wrap}
  .qnum{font-weight:700; color:#cbd6ff;}
  .qtype{font-size:12px; color:var(--muted); padding:2px 8px; border:1px solid var(--border); border-radius:999px;}
  .qtext{margin:10px 0 10px; line-height:1.5}
  .opts{display:grid; gap:10px; margin:12px 0;}
  .opt{
    display:flex; gap:10px; align-items:flex-start; padding:10px 12px; border:1px solid var(--border);
    border-radius:10px; background:#0d1320; transition:background .2s,border-color .2s;
  }
  .opt input[type="checkbox"]{margin-top:3px; width:18px; height:18px; accent-color:var(--accent);}
  .codebox{width:100%; min-height:90px; padding:10px 12px; font-family:ui-monospace,SFMono-Regular,Consolas,monospace;
           background:#0a0f1b; color:#e9f1ff; border:1px solid var(--border); border-radius:10px; resize:vertical;}
  .actions{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:12px;}
  .btn{
    border:1px solid #2c3b55; background:#162136; color:#e9f1ff; padding:8px 12px; border-radius:12px; cursor:pointer;
    transition:transform .04s ease, background .2s;
  }
  .btn:hover{background:#1a2946}
  .btn:active{transform:translateY(1px)}
  .result{margin-top:10px; font-weight:600}
  .correct{color:var(--good)}
  .incorrect{color:var(--bad)}
  .explain{margin-top:6px; color:#9fc4ff}
  .pill{display:inline-block; font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); color:var(--muted);}
  .section-title{margin-top:36px; font-size:22px;}
  .footer{margin-top:26px; color:var(--muted); font-size:13px;}
  .mutual-note{font-size:12px; color:var(--muted); margin-top:-4px;}
  .legend{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin:8px 0 16px}
  .legend .chip{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color:var(--muted)}
  .tag{font-size:11px; padding:2px 6px; border-radius:6px; border:1px solid var(--border); color:#b7c4ff; margin-left:6px;}
  .hr{height:1px; background:linear-gradient(90deg, transparent, #2a3956, transparent); margin:20px 0;}
  .kbd{font-family:ui-monospace,Consolas,monospace; font-size:12px; color:#cfe0ff; background:#111726; padding:1px 6px; border-radius:6px; border:1px solid var(--border);}
  @media (max-width:700px){ .opt{flex-direction:row} }
</style>
</head>
<body>
<div class="wrap">
  <h1>Comprehensive Quiz — Frequent Pattern Mining, Rule-Based Classification & Clustering</h1>
  <p class="sub">50 questions total. MCQs, True/False, and R/practical coding questions. Click <b>Check Answer</b> per question for feedback.</p>

  <div class="legend">
    <span class="chip">Feedback: <span style="color:#1fbf75">green</span> = correct, <span style="color:#ff5d5d">red</span> = wrong, <span style="color:#7aa2ff">blue</span> = correct answer + explanation</span>
    <span class="chip">Theme: Dark</span>
  </div>

  <div id="quiz"></div>

  <div class="footer">
    Covers Frequent Pattern Mining (Apriori, FP-Growth)【9†source】, Rule-Based Classification【10†source】, and Clustering【11†source】.
  </div>
</div>

<script>
/* -----------------------------
   Question Data
   ----------------------------- */

// Section A: Multiple Choice (25)
const mcq = [
  { q:"In Apriori, 'support' measures:", choices:["P(B|A)","The proportion of transactions containing the itemset","Rule novelty","Rule accuracy"], correct:[1], why:"Support = proportion of transactions containing the itemset.【9†source】"},
  { q:"Confidence of rule A→B equals:", choices:["P(A∪B)","P(A)/P(B)","P(B|A)","Lift(A,B)"], correct:[2], why:"Confidence = conditional probability that B occurs given A.【9†source】"},
  { q:"Lift > 1 indicates:", choices:["Independence","Positive correlation","Negative correlation","Random noise"], correct:[1], why:"Lift>1 shows positive association between items.【9†source】"},
  { q:"Which algorithm avoids candidate generation?", choices:["Apriori","FP-Growth","Naïve Bayes","K-Means"], correct:[1], why:"FP-Growth compresses DB into FP-tree and mines without candidate generation.【9†source】"},
  { q:"Apriori property states:", choices:["All supersets must be frequent","All nonempty subsets of a frequent itemset must be frequent","Confidence equals Lift","Lift must exceed 1"], correct:[1], why:"Apriori uses downward closure property (anti-monotonic).【9†source】"},
  { q:"Rule-based classifiers represent models as:", choices:["Decision trees","IF–THEN rules","Neural networks","Distance matrices"], correct:[1], why:"They use IF–THEN rules for classification.【10†source】"},
  { q:"The 'coverage' of a rule is:", choices:["% tuples it covers","% tuples classified correctly","Entropy reduction","Support"], correct:[0], why:"Coverage = fraction of dataset instances covered by the rule.【10†source】"},
  { q:"Conflict resolution strategy 'size ordering' prefers:", choices:["Shortest rule","Most general rule","Rule with largest antecedent","Random selection"], correct:[2], why:"Size ordering chooses rule with most specific conditions.【10†source】"},
  { q:"In class-based ordering:", choices:["Choose rule with longest antecedent","Choose rule predicting most important class","Random choose","None"], correct:[1], why:"Prefers rules predicting classes ranked by importance or prevalence.【10†source】"},
  { q:"Sequential covering algorithm learns rules by:", choices:["Covering negatives","Removing positives as rules are learned","Pruning trees","Random selection"], correct:[1], why:"Each time a rule is learned, positives covered are removed.【10†source】"},
  { q:"FOIL uses which metric?", choices:["Entropy","FOIL Gain (information gain)","Lift","Support"], correct:[1], why:"FOIL evaluates rule extensions using information gain-like measure.【10†source】"},
  { q:"Pruning rules helps to:", choices:["Overfit more","Improve interpretability and generalization","Increase size","Eliminate all rules"], correct:[1], why:"Pruning reduces overfitting, improves generalization.【10†source】"},
  { q:"Clustering is:", choices:["Supervised","Unsupervised","Semi-supervised","Reinforcement"], correct:[1], why:"Clustering is unsupervised learning.【11†source】"},
  { q:"K-means is a:", choices:["Hierarchical method","Exclusive clustering method","Probabilistic clustering","Overlapping clustering"], correct:[1], why:"K-means assigns each observation to exactly one cluster.【11†source】"},
  { q:"Hierarchical agglomerative clustering begins with:", choices:["One cluster","Every point as its own cluster","Two clusters","Centroids"], correct:[1], why:"Agglomerative starts with each object separate.【11†source】"},
  { q:"Nearest neighbor linkage is also called:", choices:["Complete linkage","Average linkage","Single linkage","Centroid method"], correct:[2], why:"Single linkage uses nearest neighbor distance.【11†source】"},
  { q:"Which distance is most common for interval data?", choices:["Euclidean","Cosine","Jaccard","Manhattan only"], correct:[0], why:"Euclidean distance is most common measure.【11†source】"},
  { q:"Overlapping clustering is implemented by:", choices:["K-means","Hierarchical","Fuzzy C-means","Naïve Bayes"], correct:[2], why:"Fuzzy C-means allows degrees of membership.【11†source】"},
  { q:"Which is NOT a clustering requirement?", choices:["Scalability","Ability to handle noise","Must always use Euclidean distance","Interpretability"], correct:[2], why:"Algorithms may use other distance measures, not always Euclidean.【11†source】"},
  { q:"Which method is divisive?", choices:["Agglomerative hierarchical","Divisive hierarchical","K-means","FP-Growth"], correct:[1], why:"Divisive starts with one cluster, splits until singles.【11†source】"},
  { q:"An application of clustering is:", choices:["Fraud detection","Rule pruning","Apriori pruning","Decision tree splitting"], correct:[0], why:"Clustering often used in anomaly/fraud detection.【11†source】"},
  { q:"Entropy in rule quality measures:", choices:["Measures support","Measures information needed to classify","Always increases accuracy","Not used"], correct:[1], why:"Entropy = expected info needed, lower is better.【10†source】"},
  { q:"Which is a sequential covering stopping condition?", choices:["All positives covered","Negatives covered","Tree depth reached","Always infinite"], correct:[0], why:"Process stops when no more positives to cover.【10†source】"},
  { q:"Cluster centroid in k-means is:", choices:["Random point","Mean of cluster variables","Median of cluster","Most frequent label"], correct:[1], why:"Centroid = average coordinate of points in cluster.【11†source】"},
  { q:"Cross-selling recommendations from frequent itemsets is an example of:", choices:["Classification","Clustering","Association mining","Regression"], correct:[2], why:"Association rules support cross-sell strategies.【9†source】"}
];

// Section B: True/False (15)
const tfs = [
  { q:"FP-Growth requires candidate generation.", correct:[1], tf:["True","False"], why:"It avoids candidate generation by FP-tree.【9†source】"},
  { q:"Rule coverage = % tuples a rule covers.", correct:[0], tf:["True","False"], why:"Yes, coverage is % covered.【10†source】"},
  { q:"Size ordering fires the least specific rule.", correct:[1], tf:["True","False"], why:"It fires most specific rule (largest antecedent).【10†source】"},
  { q:"Clustering is supervised learning.", correct:[1], tf:["True","False"], why:"Clustering is unsupervised.【11†source】"},
  { q:"Fuzzy C-means allows overlapping membership.", correct:[0], tf:["True","False"], why:"Yes, fuzzy sets allow multiple memberships.【11†source】"},
  { q:"Entropy is higher when class distribution is mixed.", correct:[0], tf:["True","False"], why:"Entropy lower if pure class, higher if mixed.【10†source】"},
  { q:"Apriori uses downward closure property.", correct:[0], tf:["True","False"], why:"Yes, frequent subset property.【9†source】"},
  { q:"Default rule fires when no rule satisfied.", correct:[0], tf:["True","False"], why:"Default handles uncovered tuples.【10†source】"},
  { q:"Hierarchical clustering can use dendrograms.", correct:[0], tf:["True","False"], why:"Yes, dendrogram shows merges.【11†source】"},
  { q:"K-means always produces same clusters regardless of initial centroids.", correct:[1], tf:["True","False"], why:"Initialization can affect results.【11†source】"},
  { q:"Coverage alone is a reliable quality measure.", correct:[1], tf:["True","False"], why:"Coverage alone not enough, accuracy needed.【10†source】"},
  { q:"Lift=1 implies independence.", correct:[0], tf:["True","False"], why:"Yes, lift=1 means independent.【9†source】"},
  { q:"Cluster analysis is useful in market segmentation.", correct:[0], tf:["True","False"], why:"Yes, helps identify groups of customers.【11†source】"},
  { q:"Pruning rules reduces overfitting.", correct:[0], tf:["True","False"], why:"Yes, pruning improves generalization.【10†source】"},
  { q:"Manhattan distance is also called city block distance.", correct:[0], tf:["True","False"], why:"Yes, Manhattan = city block.【11†source】"}
];

// Section C: R Coding / Practical (10)
const code = [
  { q:"Use arules to load transactions from Transactionlist2.csv.", patterns:[/readLines.*Transactionlist2\.csv/is], answer:`lines <- readLines("Transactionlist2.csv")`, why:"Read raw lines from CSV.【9†source】"},
  { q:"Convert list of items into 'transactions' object in R.", patterns:[/as.*transactions/is], answer:`transactions <- as(transactions_list, "transactions")`, why:"Convert to transactions class.【9†source】"},
  { q:"Plot top 5 frequent items using arules.", patterns:[/itemFrequencyPlot.*topN\s*=\s*5/is], answer:`itemFrequencyPlot(transactions, topN=5, type="absolute")`, why:"itemFrequencyPlot displays top items.【9†source】"},
  { q:"Generate association rules with supp=0.2, conf=0.6.", patterns:[/apriori.*supp.*0\.2.*conf.*0\.6/is], answer:`rules <- apriori(transactions, parameter=list(supp=0.2, conf=0.6))`, why:"Use apriori() with support & confidence.【9†source】"},
  { q:"Sort rules by lift and inspect top 5.", patterns:[/sort.*lift/is], answer:`rules_sorted <- sort(rules, by="lift", decreasing=TRUE)\ninspect(rules_sorted[1:5])`, why:"Sort by lift to see strongest rules.【9†source】"},
  { q:"Interpret rule quality using coverage and accuracy.", patterns:[/coverage|accuracy/is], answer:`coverage(R, D) ; accuracy(R, D)`, why:"Coverage=proportion covered; accuracy=% correctly classified.【10†source】"},
  { q:"Perform clustering with kmeans() into 3 clusters.", patterns:[/kmeans.*3/is], answer:`kmeans(data, centers=3)`, why:"Run kmeans with 3 clusters.【11†source】"},
  { q:"Compute Euclidean distance matrix for data frame df.", patterns:[/dist.*df/is], answer:`dist(df, method="euclidean")`, why:"dist() computes distance matrix.【11†source】"},
  { q:"Draw dendrogram from hierarchical clustering.", patterns:[/plot.*hclust/is], answer:`hc <- hclust(dist(df))\nplot(hc)`, why:"hclust builds tree, plot() draws dendrogram.【11†source】"},
  { q:"Replace -99 with NA in vector temp.", patterns:[/temp.*==.*-99.*NA/is], answer:`temp[temp==-99] <- NA`, why:"Replace missing value codes.【9†source】"}
];

/* -----------------------------
   Rendering Functions
   ----------------------------- */

const quizEl = document.getElementById('quiz');

function createCard(){const c=document.createElement('div');c.className='card';return c;}
function createBtn(l){const b=document.createElement('button');b.className='btn';b.textContent=l;return b;}
function sanitize(s){return(s||'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}
function setResult(el,ok,text,ans,why){el.innerHTML='';const r=document.createElement('div');r.className='result '+(ok?'correct':'incorrect');r.textContent=ok?'Correct!':'Incorrect.';el.appendChild(r);const e=document.createElement('div');e.className='explain';e.innerHTML=(ok?'':`<b>Answer:</b> ${ans}<br/>`)+sanitize(why);el.appendChild(e);}

// MCQ
function renderMCQ(){
  const title=document.createElement('h2');title.className='section-title';title.textContent='Section A: Multiple Choice (25)';
  quizEl.appendChild(title);
  mcq.forEach((item,i)=>{
    const card=createCard();const head=document.createElement('div');head.className='qhead';
    head.innerHTML=`<span class="qnum">Q${i+1}</span><span class="qtype">MCQ</span>`;
    const text=document.createElement('div');text.className='qtext';text.textContent=item.q;
    const opts=document.createElement('div');opts.className='opts';
    item.choices.forEach((opt,idx)=>{const row=document.createElement('label');row.className='opt';
      const cb=document.createElement('input');cb.type='checkbox';cb.dataset.group='mcq'+(i+1);
      cb.addEventListener('change',()=>{document.querySelectorAll(`input[data-group="mcq${i+1}"]`).forEach(box=>{if(box!==cb)box.checked=false;});});
      const span=document.createElement('div');span.innerHTML=sanitize(opt);row.appendChild(cb);row.appendChild(span);opts.appendChild(row);});
    const actions=document.createElement('div');actions.className='actions';const note=document.createElement('div');note.className='mutual-note';note.textContent='(Select one.)';
    const btn=createBtn('Check Answer');const res=document.createElement('div');res.className='result';
    btn.addEventListener('click',()=>{const boxes=[...opts.querySelectorAll('input')];const chosen=boxes.findIndex(b=>b.checked);const ok=(chosen===item.correct[0]);const letters=['A','B','C','D'];const ansText=letters[item.correct[0]]+'. '+item.choices[item.correct[0]];setResult(res,ok,null,ansText,item.why);card.style.borderColor=ok?'rgba(31,191,117,.6)':'rgba(255,93,93,.5)';});
    actions.appendChild(btn);card.appendChild(head);card.appendChild(text);card.appendChild(opts);card.appendChild(note);card.appendChild(actions);card.appendChild(res);quizEl.appendChild(card);
  });
}

// TF
function renderTF(){
  const title=document.createElement('h2');title.className='section-title';title.textContent='Section B: True/False (15)';
  quizEl.appendChild(title);
  tfs.forEach((item,j)=>{const idx=j+mcq.length+1;const card=createCard();const head=document.createElement('div');head.className='qhead';
    head.innerHTML=`<span class="qnum">Q${idx}</span><span class="qtype">True/False</span>`;const text=document.createElement('div');text.className='qtext';text.textContent=item.q;
    const opts=document.createElement('div');opts.className='opts';
    item.tf.forEach((opt,k)=>{const row=document.createElement('label');row.className='opt';const cb=document.createElement('input');cb.type='checkbox';cb.dataset.group='tf'+(j+1);
      cb.addEventListener('change',()=>{document.querySelectorAll(`input[data-group="tf${j+1}"]`).forEach(box=>{if(box!==cb)box.checked=false;});});const span=document.createElement('div');span.textContent=opt;row.appendChild(cb);row.appendChild(span);opts.appendChild(row);});
    const actions=document.createElement('div');actions.className='actions';const note=document.createElement('div');note.className='mutual-note';note.textContent='(Select one.)';const btn=createBtn('Check Answer');const res=document.createElement('div');res.className='result';
    btn.addEventListener('click',()=>{const boxes=[...opts.querySelectorAll('input')];const chosen=boxes.findIndex(b=>b.checked);const ok=(chosen===item.correct[0]);const ansText=item.tf[item.correct[0]];setResult(res,ok,null,ansText,item.why);card.style.borderColor=ok?'rgba(31,191,117,.6)':'rgba(255,93,93,.5)';});
    actions.appendChild(btn);card.appendChild(head);card.appendChild(text);card.appendChild(opts);card.appendChild(note);card.appendChild(actions);card.appendChild(res);quizEl.appendChild(card);});
}

// Code
function renderCode(){
  const title=document.createElement('h2');title.className='section-title';title.textContent='Section C: R Coding / Practical (10)';
  quizEl.appendChild(title);
  code.forEach((item,k)=>{const idx=mcq.length+tfs.length+k+1;const card=createCard();const head=document.createElement('div');head.className='qhead';
    head.innerHTML=`<span class="qnum">Q${idx}</span><span class="qtype">Coding</span><span class="tag">R</span>`;const text=document.createElement('div');text.className='qtext';text.textContent=item.q;
    const ta=document.createElement('textarea');ta.className='codebox';ta.placeholder='Type R code here...';const actions=document.createElement('div');actions.className='actions';const btn=createBtn('Check Answer');const res=document.createElement('div');res.className='result';
    btn.addEventListener('click',()=>{const user=ta.value.trim();let ok=false;for(const pat of item.patterns){const re=new RegExp(pat);if(re.test(user)){ok=true;break;}}const ansText=item.answer.replace(/\n/g,'<br>');setResult(res,ok,null,ansText,item.why);card.style.borderColor=ok?'rgba(31,191,117,.6)':'rgba(255,93,93,.5)';});
    actions.appendChild(btn);card.appendChild(head);card.appendChild(text);card.appendChild(ta);card.appendChild(actions);card.appendChild(res);quizEl.appendChild(card);});
}

renderMCQ();quizEl.appendChild(document.createElement('div')).className='hr';renderTF();quizEl.appendChild(document.createElement('div')).className='hr';renderCode();
</script>
</body>
</html>
